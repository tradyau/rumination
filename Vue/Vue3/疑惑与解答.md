# 疑问与解答

## 关于 setup 传入的 props

> 组合式 API 基础.md

> 1.  如果 props 内传进来的东西需要转成响应式对象，那说明它原本并不是响应式的？那和 vue2 的 props 就不一样了，vue2 的 props 是可以直接 this 去用的，而且也是响应式。
> 2.  又或者父组件的 user 更新时，也会更新 setup 的 props，只是 props 在子组件的 setup 内并不是响应式的。
> 3.  如果`2`成立的话，为什么 vue 在 setup 的时候不直接将 props 的东西全部转成响应式的？

显然在提出这个问题的时候，我还以为`setup`和选项式 API 的非此即彼的。换句话说这两个`props`是只会存在一个的。

这样的想法明显是错误的，通过官方的 demo（组合式 API 基础.md）可以看出，两者是同时存在的。`setup`的`props`其实也是选项式 API 中声明过的。

继续分析，`toRefs()`是将`props`的内容从选项式 API 的范围，转化为了组合式 API 作用范围内的响应式。

再往下分析，也就意味着`setup`中的响应式，和选项式 API`props`甚至`data`中通过`Proxy`(`defineproperty`)所生成的响应式对象，并不是一回事。（存疑）

而props本身其实也已经是响应式了，只是props不能通过解构直接拿到里面的东西，因为它不是一个纯粹的js对象，而是一个响应式。所以直接解构的时候才需要`toRefs`去处理一下。


## setup内如何与子组件通信
> 这里有个问题，setup内既然无法使用refs，那他如何调用子组件内部的数据?

参考模板引用部分，setup并不是直接通过`this.refs`的方法去引用子组件实例。而是通过返回ref响应式数据去绑定。